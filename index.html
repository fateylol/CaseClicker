<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="case1.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="./img/Recoil/case1.png">
    <link rel="stylesheet" href="style.css">
    <title>Case Clicker</title>
</head>
<body>
    <div id="menu1" class="bg-color" style="visibility:visible;">
        <div id ="weaponwin1"class="bg-modal">
            <div class="container-modal">
                <h3>Settings</h3>
                <div class="settings">
                    <h4>Popups:</h4>
                    <button class="settingbutton" id="popupstate" onclick="togglepopup()"style="background-color:green;border-color:green;border-radius:4px;">Enabled</button>
                </div>
                <button class="confirmbutton" onclick="closesettings()">Close</button>
            </div>
        </div>
    </div>

    <div id="menu" class="bg-color" style="visibility:hidden;">
        <div id ="weaponwin"class="bg-modal">
            <div class="container-modal">
                <h3 id="newitemname">{ITEM NAME}</h3>
                <img draggable="false" id="newitemimg" src="./img/Recoil/ak47_ice_coaled.png" style="height:70%;">
                <button class="confirmbutton" onclick="closemenu()">CONFIRM</button>
            </div>
        </div>
    </div>

    <div class="header"><h1>$</h1><h1 id="money">0.00</h1><right><button onclick="opensettings()">Settings</button></right></div>
    <div class="container">
        <div class="onrow">
            <div class="leftmenu"><button class="clearbutton" onclick="open123()"><img draggable="false" src="./img/Recoil/case1.png" style="height:200px"><h2>Recoil Case</h2><div class="makestringrow"><p>Key Price: $</p><p id="caseprice">2.50</p><p>|</p><p>Key Price: $</p><p id="keyprice">1.28</p></div></button></div>
            <button class="clearbutton1" onclick="shoot()"><div class="btnspace"></div></button>
        </div>
        <div id ="itemstext"class="mainpart">
        </div>
    </div>
</body>
<script>

    var amountpclick = 0.10

    function closesettings() {
        document.getElementById("menu1").style.visibility = "hidden";
    }

    function opensettings() {
        document.getElementById("menu1").style.visibility = "visible";
    }

    function togglepopup() {
        let state = document.getElementById("popupstate").textContent
        
        if (state == "Enabled") {
            document.getElementById("popupstate").textContent = "Disabled"
            document.getElementById("popupstate").style.backgroundColor = "red"
            document.getElementById("popupstate").style.borderColor = "red"
        } else {
            document.getElementById("popupstate").textContent = "Enabled"
            document.getElementById("popupstate").style.backgroundColor = "green"
            document.getElementById("popupstate").style.borderColor = "green"
        }
    }

    function closemenu() {
        document.getElementById("menu").style.visibility = "hidden";
    }

    function shoot() {
        let currMoney = document.getElementById("money").innerHTML
        let sumFL = parseFloat(currMoney)

        let newsum1 = sumFL + amountpclick
        document.getElementById("money").innerHTML = `${(Math.round(newsum1 * 100))/ 100}`
    }
    
    function reply_click(clicked) {
        let itemsoldvalue = document.getElementById(clicked).textContent
        let removedlr = itemsoldvalue.replace("$", "")
        let currMoney = document.getElementById("money").innerHTML
        
        let itemSoldValueINT = parseFloat(removedlr)
        let currMoney1INT = parseFloat(currMoney)

        let sum = itemSoldValueINT + currMoney1INT

        document.getElementById("money").innerHTML = `${(Math.round(sum * 100))/ 100}`

        document.getElementById(clicked).parentElement.remove();
    }


    var idforbutton = 0

    function open123() {

        let currMoney = document.getElementById("money").innerHTML
        let sumFL = parseFloat(currMoney)

        let cprice = parseFloat(document.getElementById("caseprice").innerHTML)
        let kprice = parseFloat(document.getElementById("keyprice").innerHTML)
        let minusamount = cprice + kprice

        // DROP RATES //
        let blueL = 0
        let blueH = 150

        let purpleL = 150
        let purpleH = 180

        let pinkL = 180
        let pinkH = 197

        let redL = 197
        let redH = 200
        
        if (sumFL > minusamount) {
            let newsum = currMoney - minusamount
            
            document.getElementById("money").innerHTML = `${(Math.round(newsum * 100))/ 100}`
            
            let ranum = Math.floor(Math.random() * (+201 - 1)) + 1;
            
            if (ranum > blueL && ranum < blueH) {
                RecoilBlue()
            }

            if (ranum > purpleL && ranum < purpleH) {
                RecoilPurple()
            }

            if (ranum > pinkL && ranum < pinkH) {
                RecoilPink()
            }

            if (ranum > redL && ranum < redH) {
                RecoilRed()
            }

        }

    }
</script>

<script src="RecoilCase.js"></script>

</html>